function sendDataRequest(){var e,t=document.getElementById("formstyle").value;e="@"===t.charAt(0)?t.substring(1):t;var n=0,o="/search?utf8=\u2713&q="+e,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status?createParentComponent(JSON.parse(r.responseText)):500===r.status&&0===n&&(type(": sorry can't find that user",0),n=1)},r.open("GET",o,!0),r.setRequestHeader("Accept","text/javascript"),r.send()}function createParentComponent(e){e.length||type(": sorry, I can't see your pictures",0);var t;e.length<12?(e.length=e.length,window.innerWidth<509?t="30%":window.innerWidth>=509&&window.innerWidth<=900?t="22%":window.innerWidth>900&&(t="15%")):e.length>=12&&e.length<48?(e.length=12,window.innerWidth<509?t="30%":window.innerWidth>=509&&window.innerWidth<=900?t="22%":window.innerWidth>900&&(t="15%")):e.length>=48&&(e.length=48,window.innerWidth<509?t="30%":window.innerWidth>=509&&window.innerWidth<=900?t="14%":window.innerWidth>900&&(t="8%")),e.slice(0,e.length).forEach(function(e){var n=document.createElement("div");n.style.width=t,n.style.paddingBottom=t,n.className="parent",n.appendChild(createImgandColorDiv(e,t)[1]),n.appendChild(createImgandColorDiv(e,t)[0]),document.getElementById("picContainer").appendChild(n)})}function createImgandColorDiv(e,t){var t=parseFloat(t)/100*document.getElementById("picContainer").clientWidth,n=document.createElement("img");n.style.height=t+"px",n.style.width=t+"px",n.style.opacity="0";var o=document.createElement("div");return o.style.height=t+"px",o.style.width=t+"px",o.className="cdiv",n.onload=function(){var e=document.getElementsByClassName("cdiv"),t=getDominantHSLColor(n);COLORS.push(t),o.style.backgroundColor="hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)",COLORS.length===e.length&&setTimeout(function(){type(getAttributes(COLORS),0)},2e3)},n.src=e,[n,o]}function displayButton(){var e=document.getElementById("startOver");e.style.display="block"}function getDominantHSLColor(e){var t=new ColorThief,n=t.getColor(e),o=rgbToHsl(n[0],n[1],n[2]);return o}function rgbToHsl(e,t,n){e/=255,t/=255,n/=255;var o,r,i=Math.max(e,t,n),a=Math.min(e,t,n),s=(i+a)/2;if(i==a)o=r=0;else{var u=i-a;switch(r=s>.5?u/(2-i-a):u/(i+a),i){case e:o=(t-n)/u+(n>t?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return[Math.floor(360*o),Math.floor(100*r),Math.floor(100*s)]}function getAttributes(e){var t=[],n=0;e.forEach(function(e){if(e[1]>50&&e[2]>20){n++;for(var t=0;t<COLOR_DEFINITIONS.length;t++)e[0]<COLOR_DEFINITIONS[t].lowerThan&&e[0]>=COLOR_DEFINITIONS[t].higherThan&&COLOR_DEFINITIONS[t].count++}});for(var o=0;o<COLOR_DEFINITIONS.length;o++)COLOR_DEFINITIONS[o].count=2*Math.floor(COLOR_DEFINITIONS[o].count/n*5);COLOR_DEFINITIONS.sort(function(e,t){return t.count-e.count});for(var r=0;r<COLOR_DEFINITIONS.length;r++)if(0!=COLOR_DEFINITIONS[r].count)for(var i=0;i<COLOR_DEFINITIONS[r].count;i++)t.push(COLOR_DEFINITIONS[r].attributes[i]);return 0===t.length?": you're mysterious":": you're "+t.slice(0,3).join(", ")}function type(e,t){var n=e.charAt(t),o=document.getElementById("formstyle");o.value+=n,t<e.length?setTimeout(function(){type(e,t+1)},100*Math.random()):(o.blur(),setTimeout(function(){displayButton()},500))}function start(){var e=document.getElementById("formstyle"),t=document.getElementById("picContainer"),n=(document.getElementById("attributes"),document.getElementById("startOver"));e.addEventListener("keydown",function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t.innerHTML="",sendDataRequest())}),n.addEventListener("click",function(){COLORS=[];for(var t=0;t<COLOR_DEFINITIONS.length;t++)COLOR_DEFINITIONS[t].count=0;for(;document.images.length;){var o=document.images[0].parentNode,r=o.parentNode;r.removeChild(o)}e.value="@",e.focus(),e.setSelectionRange(1,1),n.style.display="none"})}var COLORS=[],COLOR_DEFINITIONS=[{name:"Red",higherThan:350,lowerThan:10,attributes:["sensual","ambitious","extroverted","courageous","egoistic"],count:0},{name:"Orange",higherThan:10,lowerThan:30,attributes:["social","vivacious","unpredictable","assertive","inconsistent"],count:0},{name:"Yellow",higherThan:30,lowerThan:75,attributes:["optimistic","meticulous","nerdy","networker","snob"],count:0},{name:"Green",higherThan:75,lowerThan:135,attributes:["caring","empathetic","practical","gracious","gossip girl"],count:0},{name:"Turquoise",higherThan:135,lowerThan:190,attributes:["wise","independent","idealistic","outspoken","narcissistic"],count:0},{name:"Blue",higherThan:190,lowerThan:240,attributes:["harmonious","trustworthy","loyal","sincere","stubborn"],count:0},{name:"Purple",higherThan:240,lowerThan:310,attributes:["intuitive","futuristic","introspective","eccentric","drama queen"],count:0},{name:"Pink",higherThan:310,lowerThan:350,attributes:["resourceful","loving","generous","romantic","naive"],count:0}];window.onload=function(){start()};