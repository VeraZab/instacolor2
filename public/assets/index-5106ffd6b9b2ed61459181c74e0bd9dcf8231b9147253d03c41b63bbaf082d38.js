function sendDataRequest(){var t,e=document.getElementById("formstyle").value;t="@"===e.charAt(0)?e.substring(1):e;var n=0,r="/search?utf8=\u2713&q="+t,a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status?createParentComponent(JSON.parse(a.responseText)):500===a.status&&0===n&&(type(": sorry can't find that user",0),n=1)},a.open("GET",r,!0),a.setRequestHeader("Accept","text/javascript"),a.send()}function createParentComponent(t){t.length||type(": sorry, I can't see your pictures",0);var e;t.length<12?(t.length=t.length,window.innerWidth<509?e="30%":window.innerWidth>=509&&window.innerWidth<=900?e="22%":window.innerWidth>900&&(e="16%")):t.length>=12&&t.length<48?(t.length=12,window.innerWidth<509?e="30%":window.innerWidth>=509&&window.innerWidth<=900?e="22%":window.innerWidth>900&&(e="16%")):t.length>=48&&(t.length=48,window.innerWidth<509?e="30%":window.innerWidth>=509&&window.innerWidth<=900?e="14%":window.innerWidth>900&&(e="8%")),t.forEach(function(t){var n=document.createElement("div");n.style.width=e,n.style.paddingBottom=e,n.className="parent";var r=createImgandColorDiv(t,e);n.appendChild(r[1]),n.appendChild(r[0]),document.getElementById("picContainer").appendChild(n)})}function createImgandColorDiv(t,e){var e=parseFloat(e)/100*document.getElementById("picContainer").clientWidth,n=document.createElement("img");n.style.height=e+"px",n.style.width=e+"px",n.style.opacity="0";var r=document.createElement("div");return r.style.height=e+"px",r.style.width=e+"px",r.className="cdiv",n.onload=function(){var t=document.getElementsByClassName("cdiv"),e=getDominantHSLColor(n);COLORS.push(e),r.style.backgroundColor="hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)",COLORS.length===t.length&&type(getAttributes(COLORS),0)},n.src=t,[n,r]}function displayButton(){var t=document.getElementById("startOver");t.style.display="block"}function getDominantHSLColor(t){var e=new ColorThief,n=e.getColor(t),r=rgbToHsl(n[0],n[1],n[2]);return r}function rgbToHsl(t,e,n){t/=255,e/=255,n/=255;var r,a,o=Math.max(t,e,n),i=Math.min(t,e,n),s=(o+i)/2;if(o==i)r=a=0;else{var u=o-i;switch(a=s>.5?u/(2-o-i):u/(o+i),o){case t:r=(e-n)/u+(n>e?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return[Math.floor(360*r),Math.floor(100*a),Math.floor(100*s)]}function getAttributes(t){var e=[],n=0;t.forEach(function(t){if(t[1]>=40&&t[2]>20){n++;for(var e=0;e<COLOR_DEFINITIONS.length;e++)t[0]<COLOR_DEFINITIONS[e].lowerThan&&t[0]>=COLOR_DEFINITIONS[e].higherThan&&(COLOR_DEFINITIONS[e].saturation+=t[1],COLOR_DEFINITIONS[e].count++)}}),COLOR_DEFINITIONS.sort(function(t,e){return e.saturation-t.saturation});for(var r=0;r<COLOR_DEFINITIONS.length;r++)COLOR_DEFINITIONS[r].count=Math.floor(COLOR_DEFINITIONS[r].count/n*5*2);for(var a=0;a<COLOR_DEFINITIONS.length;a++)if(0!=COLOR_DEFINITIONS[a].count)for(var o=0;o<COLOR_DEFINITIONS[a].count;o++)e.push(COLOR_DEFINITIONS[a].attributes[o]);return 0===e.length?": you're mysterious":": you're "+e.slice(0,3).join(", ")}function type(t,e){var n=t.charAt(e),r=document.getElementById("formstyle");r.value+=n,e<t.length?setTimeout(function(){type(t,e+1)},100*Math.random()):(r.blur(),setTimeout(function(){displayButton()},500))}function start(){var t=document.getElementById("formstyle"),e=document.getElementById("picContainer"),n=(document.getElementById("attributes"),document.getElementById("startOver"));t.addEventListener("keydown",function(t){13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.innerHTML="",sendDataRequest())}),n.addEventListener("click",function(){COLORS=[];for(var e=0;e<COLOR_DEFINITIONS.length;e++)COLOR_DEFINITIONS[e].count=0,COLOR_DEFINITIONS[e].saturation=0;for(;document.images.length;){var r=document.images[0].parentNode,a=r.parentNode;a.removeChild(r)}t.value="@",t.focus(),t.setSelectionRange(1,1),n.style.display="none"})}var COLORS=[],COLOR_DEFINITIONS=[{name:"Red",higherThan:350,lowerThan:10,attributes:["sensual","ambitious","extroverted","courageous","egoistic"],saturation:0,count:0},{name:"Orange",higherThan:10,lowerThan:30,attributes:["social","vivacious","unpredictable","assertive","inconsistent"],saturation:0,count:0},{name:"Yellow",higherThan:30,lowerThan:75,attributes:["optimistic","meticulous","nerdy","networker","snob"],saturation:0,count:0},{name:"Green",higherThan:75,lowerThan:135,attributes:["caring","empathetic","practical","gracious","gossip girl"],saturation:0,count:0},{name:"Turquoise",higherThan:135,lowerThan:190,attributes:["wise","independent","idealistic","outspoken","narcissistic"],saturation:0,count:0},{name:"Blue",higherThan:190,lowerThan:240,attributes:["harmonious","trustworthy","loyal","sincere","stubborn"],saturation:0,count:0},{name:"Purple",higherThan:240,lowerThan:310,attributes:["intuitive","futuristic","introspective","eccentric","drama queen"],saturation:0,count:0},{name:"Pink",higherThan:310,lowerThan:350,attributes:["resourceful","loving","generous","romantic","naive"],saturation:0,count:0}];window.onload=function(){start()};